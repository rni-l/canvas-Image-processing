!function t(e,n,a){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n||t)},c,c.exports,t,e,n,a)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<a.length;o++)i(a[o]);return i}({1:[function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t){c.push(t.x),d.push(t.y),h.push(t.n),f.push(t.color),g.push(t.width)}function r(t){w.beginPath(),w.lineCap="round",w.lineJoin="round";for(var e=1;e<t;e++)w.lineWidth=g[e],w.strokeStyle=f[e],S=c[e],C=d[e],2===h[e]?(w.beginPath(),w.save(),w.moveTo(S,C)):w.lineTo(S,C),w.stroke(),w.restore();w.closePath()}function o(t){t.preventDefault();var e=t.touches[0];c.push(Math.floor(e.pageX-p)),d.push(Math.floor(e.pageY-v)),h.push(1),g.push(u.default.w),f.push(u.default.color),r(c.length)}Object.defineProperty(n,"__esModule",{value:!0});var s=a(t("./opts")),u=a(t("./lineData")),l=a(t("./filter")),c=[],d=[],h=[],f=[],g=[],m=[],p=s.default.oCan.offsetLeft,v=s.default.oCan.offsetTop,y=s.default.oCan,w=s.default.ctx,S=-1,C=-1;s.default.oRevoke.addEventListener("touchstart",function(){if(!m[m.length-1])return!1;var t=m[m.length-1];m.pop(),c.length=t,d.length=t,h.length=t,f.length=t,g.length=t,w.clearRect(0,0,s.default.canvasW,s.default.canvasH);var e=s.default.data;w.drawImage(e.img,e.imgPos.x,e.imgPos.y,e.imgPos.w,e.imgPos.h),(0,l.default)(),r(t)}),y.addEventListener("touchstart",function(t){if(w.clearRect(0,0,s.default.canvasW,s.default.cavasH),!s.default.isDraw)return!1;s.default.isNewPic&&(s.default.isNewPic=!1,c.length=0,d.length=0,h.length=0,f.length=0,g.length=0);var e=t.touches[0];i({x:e.pageX-p,y:e.pageY-v,n:2,color:u.default.color,width:u.default.w}),m.push(h.length),y.addEventListener("touchmove",o,!1)},!1),y.addEventListener("touchend",function(t){if(!s.default.isDraw)return!1;var e=t.changedTouches[0];i({x:e.pageX-p,y:e.pageY-v,n:1,color:u.default.color,width:u.default.w}),y.removeEventListener("touchmove",o,!1)},!1),n.default=function(){r(h.length)}},{"./filter":2,"./lineData":3,"./opts":5}],2:[function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.data.imageData;if(!t)return!1;var n=u.default.ctx,a=c.default[t].apply(c.default,[e].concat(i(h.filter))),r=u.default.data.imgPos;n.clearRect(r.x,r.y,r.w,r.h),n.putImageData(a,r.x,r.y),a=null,r=null}function o(){h.filter.length=0,v.forEach(function(t){h.filter.push(t.value)}),r(p),(0,l.default)()}function s(t){var e="";return p=t.name,t.chooseValue.forEach(function(n,a){var i=t.range;e+="<div class='list'>\n      <span>"+n+"</span><input type='range' max='"+i[a].max+"' min='"+i[a].min+"' value='"+i[a].first+"' id='"+n+"' /><span>"+i[a].first+"</span>\n    </div>"}),e}Object.defineProperty(n,"__esModule",{value:!0});var u=a(t("./opts")),l=a(t("./draw")),c=a(t("./../../plugins/imagefilters")),d=a(t("./../../utils/filterData")),h={filter:[]},f=document.getElementById("filterBox"),g=document.getElementById("filterSelect"),m=document.querySelector("#filterBox .content"),p="",v=[];f.addEventListener("change",function(t){"range"===t.target.getAttribute("type")&&o()},!1),f.addEventListener("input",function(t){var e=t.target;"range"===e.getAttribute("type")&&(e.nextSibling.innerHTML=e.value)}),f.addEventListener("touchstart",function(){u.default.isStopPrevent=!1},!1),g.addEventListener("change",function(){var t=this;u.default.isStopPrevent=!0;var e=d.default.filterValue.filter(function(e){return e.name===t.value});if(!e)return!1;m.innerHTML=s(e[0]);var n=[].concat(i(document.querySelectorAll("#filterBox .content input")));v=n.filter(function(t){return"INPUT"===t.nodeName}),o()},!1),n.default=r},{"./../../plugins/imagefilters":11,"./../../utils/filterData":12,"./draw":1,"./opts":5}],3:[function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=a(t("./opts")),r=a(t("./../../plugins/colorPicker")),o={color:"#000000",w:5};document.addEventListener("DOMContentLoaded",function(){function t(t){var n=t.touches[0].clientY-c.t;n<=0?n=0:n>=c.h&&(n=c.h),i.default.transform(u,"translateY("+n+"px)"),c.my=n;var a=Math.floor(n/c.num);o.w=a,e.innerHTML="宽度："+a}var e=document.querySelector(".rangeWrap p"),n=document.querySelector(".colorBtn"),a=document.querySelector(".colorPickerbox"),s=!0,u=document.querySelector(".rangeBtn"),l=document.querySelector(".rangeLine"),c={h:l.offsetHeight,t:l.offsetTop,rH:u.offsetHeight,max:10,min:1,size:1,num:0};new r.default({oBox:a,oBtnWrap:document.querySelector(".btnWrap"),oCan:document.querySelector("#colorPicker"),width:200,height:200,callback:function(t){o.color=t,n.style.background=t}}).init(),n.addEventListener("touchstart",function(){i.default.transform(a,"translateX("+(s?0:-1e3)+"px)"),s=!s},!1),u.addEventListener("touchstart",function(e){e.stopPropagation();var n=e.touches[0];c.fx=n.clientX,c.fy=n.clientY,c.h=l.offsetHeight,c.t=l.offsetTop,c.rH=u.offsetHeight,c.h-=c.rH,c.num=c.h/c.max,u.addEventListener("touchmove",t,!1)},!1),u.addEventListener("touchend",function(){u.removeEventListener("touchmove",t,!1)},!1)},!1),n.default=o},{"./../../plugins/colorPicker":8,"./opts":5}],4:[function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var i=a(t("./../../plugins/fastclick")),r=a(t("./opts"));t("./photograph"),t("./draw"),t("./lineData"),t("./filter"),t("./selectImgSize"),document.addEventListener("DOMContentLoaded",function(){i.default.attach(document.body)},!1),document.querySelector(".main").addEventListener("touchmove",function(t){r.default.isStopPrevent&&t.preventDefault()},!1);var o=document.getElementById("filterBox");document.getElementById("filterBtn").addEventListener("touchstart",function(){o.style.display="block"},!1),document.querySelector("#filterBox .close").addEventListener("touchstart",function(){o.style.display="none"},!1);var s=document.querySelector(".main_top");r.default.canvasW=s.offsetWidth,r.default.canvasH=s.offsetHeight;var u=r.default.oCan;u.width=r.default.canvasW,u.height=r.default.canvasH},{"./../../plugins/fastclick":10,"./draw":1,"./filter":2,"./lineData":3,"./opts":5,"./photograph":6,"./selectImgSize":7}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=document.getElementById("canvas"),i=a.getContext("2d"),r=document.getElementById("lastImg"),o=document.querySelector(".msg"),s=document.querySelector(".zhezhao"),u=document.getElementById("revoke");n.default={oCan:a,ctx:i,oShowImg:r,oMsg:o,oZhezhao:s,oRevoke:u,showLoading:function(t){s.style.display=t,o.style.display=t},isDraw:!1,isNewPic:!0,isStopPrevent:!0,data:{},imgData:{},transform:function(t,e){t.style.WebkitTransform=e,t.style.transform=e}}},{}],6:[function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(console.log("load"),!t)return e.call(),!1;var n=new Image;n.onload=function(){e.call(n)},n.src=t}function r(){c.default.showLoading("none"),f.style.display="block",p.style.display="block",document.getElementById("filterBtn").style.display="block",c.default.oRevoke.style.display="block",y=!0,c.default.isDraw=!0,c.default.isNewPic=!0}function o(t){var e=t.drawWidth,n=t.drawHeight,a=0,i=Math.max(e,n),r=t.params;if(i>2048){var o=Math.min(e,n);o=o/i*2048,i=2048,e>n?(e=i,n=o):(e=o,n=i)}var s=document.createElement("canvas"),u=e,l=n;s.width=u,s.height=l;var c=s.getContext("2d");switch(r.data.Orientation){case 3:a=180,e=-u,n=-l;break;case 6:s.width=l,s.height=u,a=90,e=u,n=-l;break;case 8:s.width=l,s.height=u,a=270,e=-u,n=l}return{degree:a,drawWidth:e,drawHeight:n,context:c,canvas:s}}function s(t){i(t.img,function(){var e=o({drawWidth:t.data.PixelXDimension||this.naturalWidth,drawHeight:t.data.PixelYDimension||this.naturalHeight,params:t});e.context.rotate(e.degree*Math.PI/180),e.context.drawImage(this,0,0,e.drawWidth,e.drawHeight),t.next(e.canvas.toDataURL("image/png")),e=null})}function u(){var t=this.width,e=this.height;v.w=t,v.h=e,c.default.imgData.w=t,c.default.imgData.h=e;var n=c.default.canvasW,a=c.default.canvasH;n/a>t/e?(t=t*a/e,e=a):(e=e*n/t,t=n),h.clearRect(0,0,n,a),h.drawImage(this,(n-t)/2,(a-e)/2,t,e),c.default.data.imageData=h.getImageData((n-t)/2,(a-e)/2,t,e),c.default.data.img=this,c.default.data.imgPos={x:(n-t)/2,y:(a-e)/2,w:t,h:e},r()}var l=a(t("./../../plugins/exif")),c=a(t("./opts")),d=c.default.oCan,h=c.default.ctx,f=document.querySelector(".asideBtn"),g=document.querySelector("#aside"),m=document.getElementById("file"),p=document.getElementById("create"),v={},y=!1;m.addEventListener("change",function(){var t=this.files[0],e=null;if(t.size/1024>5e3)return alert("图片过大，请选择相对较小的图片"),!1;c.default.showLoading("block");var n=new FileReader;new Promise(function(n){l.default.getData(t,function(){e=l.default.getAllTags(this),n()})}).then(function(){n.onload=function(){s({img:this.result,data:e,next:function(t){i(t,u)}})},n.readAsDataURL(t)})},!1),p.addEventListener("touchstart",function(t){if(t.preventDefault(),!y)return!1;m.parentNode.removeChild(m),this.parentNode.removeChild(this),d.style.display="none",this.style.display="block",c.default.oShowImg.src=d.toDataURL("image/png"),c.default.oShowImg.style.display="block",c.default.oShowImg.style.position="static",$.post("/api/savePic",{id:document.querySelector("#user").getAttribute("userId"),url:c.default.oShowImg.src},function(t){console.log(t)}),document.querySelector(".main_bottom").innerHTML='<p class="success_txt">生成图片成功！长按可保存图片</p>'},!1),f.addEventListener("touchstart",function(){if(!y)return alert("请先选择图片"),!1;c.default.isDraw=!1,g.style.display="block"}),document.querySelector(".aside_hideBtn").addEventListener("touchstart",function(){c.default.isDraw=!0,g.style.display="none",c.default.transform(document.querySelector(".colorPickerbox"),"translateX(-1000px)")})},{"./../../plugins/exif":9,"./opts":5}],7:[function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t){function e(t){t?l/c>o/u?(o=o*c/u,u=c):(u=u*l/o,o=l):l/c<=o/u?(o=o*c/u,u=c):(u=u*l/o,o=l)}var n=void 0,a=void 0,i=void 0,r=void 0,o=s.default.imgData.w,u=s.default.imgData.h,l=s.default.canvasW,c=s.default.canvasH;switch(t){case"1":e(!0),n=(l-o)/2,a=(c-u)/2,i=o,r=u;break;case"2":e(!1),n=(l-o)/2,a=(c-u)/2,i=o,r=u;break;case"3":e(!0),n=0,a=0,i=o,r=u;break;case"4":n=0,a=0,i=l,r=c;break;default:e(!0),n=(l-o)/2,a=(c-u)/2,i=o,r=u}return{set_x:n,set_y:a,set_w:i,set_h:r}}var r=a(t("./draw")),o=a(t("./filter")),s=a(t("./opts")),u=s.default.ctx;document.getElementById("selectPicSize").addEventListener("change",function(){var t=s.default.data.img,e=i(this.value),n=e.set_x,a=e.set_y,l=e.set_w,c=e.set_h;u.clearRect(0,0,s.default.canvasW,s.default.canvasH),u.drawImage(t,n,a,l,c),s.default.data.imageData=u.getImageData(n,a,l,c),s.default.data.imgPos={x:n,y:a,w:l,h:c},t=null,(0,o.default)(),(0,r.default)()},!1)},{"./draw":1,"./filter":2,"./opts":5}],8:[function(t,e,n){"use strict";function a(t){this.oBox=t.oBox,this.oBtnWrap=t.oBtnWrap,this.oCan=t.oCan,this.ctx=t.oCan.getContext("2d"),this.w=t.width,this.h=t.width,this.lineW=20,this.r=this.w/2,this.r2=this.r-this.lineW,this.iW=(this.r2-5)/Math.cos(2*Math.PI/360*45),this.iX=(this.w-this.iW)/2,this.where="",this.opts={insideX:0,insideY:0},this.callback=t.callback,this.bindMove=null}Object.defineProperty(n,"__esModule",{value:!0}),a.prototype={init:function(){this.oCan.width=this.w,this.oCan.height=this.h,this.oBtnWrap.innerHTML='<div class="insideBtn"></div><div class="outsideBtn"></div>',this.oInsideBtn=document.querySelector(".insideBtn"),this.oOutsideBtn=document.querySelector(".outsideBtn"),this.btnW=this.oInsideBtn.offsetWidth;var t=this.w/2,e=this.h/2,n=this;this.r2;this.transform(this.oInsideBtn,"translate("+(this.iW+this.iX-this.btnW)+"px ,"+this.iX+"px)"),this.transform(this.oOutsideBtn,"translate("+t+"px ,0px)"),this.opts.insideX=this.iW+this.iX-this.btnW,this.opts.insideY=this.iX,this.createColorBg(t,e),this.createInsideColor("red");n.move.bind(this);this.bindMove=this.move.bind(this),this.oBox.addEventListener("mousedown",this.addMove.bind(this),!1),this.oBox.addEventListener("mouseup",this.removeMove.bind(this),!1),this.oCan.addEventListener("touchstart",this.addMove.bind(this),!1),this.oCan.addEventListener("touchend",this.removeMove.bind(this),!1)},addMove:function(t){if(!this.oCan_left){var e=this.getElemPos(this.oCan);this.oCan_left=e.x,this.oCan_top=e.y}this.move(t),document.addEventListener("mousemove",this.bindMove,!1),document.addEventListener("touchmove",this.bindMove,!1)},removeMove:function(){console.log("out"),document.removeEventListener("mousemove",this.bindMove,!1),document.removeEventListener("touchmove",this.bindMove,!1)},createColorBg:function(t,e){for(var n=this.ctx,a=0;a<360;a+=.1){var i=a*(2*Math.PI)/360,r=Math.cos(i),o=Math.sin(i),s=this.lineW;n.strokeStyle="hsl("+a+", 100%, 50%)",n.beginPath(),n.moveTo(t+(t-s)*r,e+(e-s)*o),n.lineTo(t+t*r,e+e*o),n.stroke(),n.closePath()}},createInsideColor:function(t){var e=this.ctx,n=(this.w,this.h,this.iW),a=this.iX;e.clearRect(a,a,n,n),e.fillStyle=t,e.fillRect(a,a,n,n);var i=e.createLinearGradient(a,(a+n)/2,a+n,(a+n)/2);i.addColorStop(0,"#FFFFFF"),i.addColorStop(1,"rgba(255,255,255,0)"),e.fillStyle=i,e.fillRect(a,a,n,n),(i=e.createLinearGradient(a,a+n,a,a)).addColorStop(0,"#000000"),i.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=i,e.fillRect(a,a,n,n)},move:function(t){var e=t.touches?t.touches[0]:t,n=e.pageX-this.oCan_left,a=e.pageY-this.oCan_top,i=this.btnPosition(n,a);if(!i)return!1;var r=this.where,o="";this.transform("outside"===r?this.oOutsideBtn:this.oInsideBtn,"translate("+i.x+"px ,"+i.y+"px)"),o=this.getColor(i.x,i.y),"outside"===r&&(this.createInsideColor(o),o=this.getColor(this.opts.insideX,this.opts.insideY)),this.callback&&this.callback(o)},btnPosition:function(t,e){var n=this.w,a=this.h,i=this.iW,r=this.iX,o=Math.sqrt(Math.pow(t-n/2,2)+Math.pow(e-a/2,2));if(t>r&&t<r+i&&e>r&&e<r+i)this.where="inside";else{if(!(o>=this.r2&&o<=this.r))return console.log("no"),!1;this.where="outside"}var s=this.where,u=this.btnW,l=u/2;if("outside"===s)t<l?t=0:t>n-l&&(t=n-u),e<l?e=0:e>a-l&&(e=a-u);else{var c=r-l,d=i+r-l,h=i+r-u;t<c?t=r:t>d&&(t=h),e<c?e=r:e>d&&(e=h),this.opts.insideX=t,this.opts.insideY=e}return{x:t,y:e}},transform:function(t,e){t.style.WebkitTransform=e,t.style.transform=e},getColor:function(t,e){var n=this.ctx.getImageData(t,e,1,1).data;return"rgb("+n[0]+","+n[1]+","+n[2]+")"},getElemPos:function(t){var e={top:0,left:0};if(t.offsetParent)for(;t.offsetParent;)e.top+=t.offsetTop,e.left+=t.offsetLeft,t=t.offsetParent;else t.x?e.left+=t.x:t.x&&(e.top+=t.y);return{x:e.left,y:e.top}}},n.default=a},{}],9:[function(t,e,n){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){function t(t){return!!t.exifdata}function i(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(t),a=n.length,i=new ArrayBuffer(a),r=new Uint8Array(i),o=0;o<a;o++)r[o]=n.charCodeAt(o);return i}function r(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(t){200!=this.status&&0!==this.status||e(this.response)},n.send()}function o(t,e){function n(n){var a=s(n),i=u(n);t.exifdata=a||{},t.iptcdata=i||{},e&&e.call(t)}if(t.src)if(/^data\:/i.test(t.src))n(i(t.src));else if(/^blob\:/i.test(t.src))(o=new FileReader).onload=function(t){n(t.target.result)},r(t.src,function(t){o.readAsArrayBuffer(t)});else{var a=new XMLHttpRequest;a.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";n(a.response),a=null},a.open("GET",t.src,!0),a.responseType="arraybuffer",a.send(null)}else if(window.FileReader&&(t instanceof window.Blob||t instanceof window.File)){var o=new FileReader;o.onload=function(t){g&&console.log("Got file of length "+t.target.result.byteLength),n(t.target.result)},o.readAsArrayBuffer(t)}}function s(t){var e=new DataView(t);if(g&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return g&&console.log("Not a valid JPEG"),!1;for(var n,a=2,i=t.byteLength;a<i;){if(255!=e.getUint8(a))return g&&console.log("Not a valid marker at offset "+a+", found: "+e.getUint8(a)),!1;if(n=e.getUint8(a+1),g&&console.log(n),225==n)return g&&console.log("Found 0xFFE1 marker"),f(e,a+4,e.getUint16(a+2));a+=2+e.getUint16(a+2)}}function u(t){var e=new DataView(t);if(g&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return g&&console.log("Not a valid JPEG"),!1;for(var n=2,a=t.byteLength;n<a;){if(function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)}(e,n)){var i=e.getUint8(n+7);return i%2!=0&&(i+=1),0===i&&(i=4),l(t,n+8+i,e.getUint16(n+6+i))}n++}}function l(t,e,n){for(var a,i,r,o,s=new DataView(t),u={},l=e;l<e+n;)28===s.getUint8(l)&&2===s.getUint8(l+1)&&(o=s.getUint8(l+2))in C&&((r=s.getInt16(l+3))+5,i=C[o],a=h(s,l+5,r),u.hasOwnProperty(i)?u[i]instanceof Array?u[i].push(a):u[i]=[u[i],a]:u[i]=a),l++;return u}function c(t,e,n,a,i){var r,o,s,u=t.getUint16(n,!i),l={};for(s=0;s<u;s++)r=n+12*s+2,!(o=a[t.getUint16(r,!i)])&&g&&console.log("Unknown tag: "+t.getUint16(r,!i)),l[o]=d(t,r,e,n,i);return l}function d(t,e,n,a,i){var r,o,s,u,l,c,d=t.getUint16(e+2,!i),f=t.getUint32(e+4,!i),g=t.getUint32(e+8,!i)+n;switch(d){case 1:case 7:if(1==f)return t.getUint8(e+8,!i);for(r=f>4?g:e+8,o=[],u=0;u<f;u++)o[u]=t.getUint8(r+u);return o;case 2:return r=f>4?g:e+8,h(t,r,f-1);case 3:if(1==f)return t.getUint16(e+8,!i);for(r=f>2?g:e+8,o=[],u=0;u<f;u++)o[u]=t.getUint16(r+2*u,!i);return o;case 4:if(1==f)return t.getUint32(e+8,!i);for(o=[],u=0;u<f;u++)o[u]=t.getUint32(g+4*u,!i);return o;case 5:if(1==f)return l=t.getUint32(g,!i),c=t.getUint32(g+4,!i),s=new Number(l/c),s.numerator=l,s.denominator=c,s;for(o=[],u=0;u<f;u++)l=t.getUint32(g+8*u,!i),c=t.getUint32(g+4+8*u,!i),o[u]=new Number(l/c),o[u].numerator=l,o[u].denominator=c;return o;case 9:if(1==f)return t.getInt32(e+8,!i);for(o=[],u=0;u<f;u++)o[u]=t.getInt32(g+4*u,!i);return o;case 10:if(1==f)return t.getInt32(g,!i)/t.getInt32(g+4,!i);for(o=[],u=0;u<f;u++)o[u]=t.getInt32(g+8*u,!i)/t.getInt32(g+4+8*u,!i);return o}}function h(t,e,n){for(var a="",i=e;i<e+n;i++)a+=String.fromCharCode(t.getUint8(i));return a}function f(t,e){if("Exif"!=h(t,e,4))return g&&console.log("Not valid EXIF data! "+h(t,e,4)),!1;var n,a,i,r,o,s=e+6;if(18761==t.getUint16(s))n=!1;else{if(19789!=t.getUint16(s))return g&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=t.getUint16(s+2,!n))return g&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var u=t.getUint32(s+4,!n);if(u<8)return g&&console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(s+4,!n)),!1;if((a=c(t,s,s+u,y,n)).ExifIFDPointer){r=c(t,s,s+a.ExifIFDPointer,v,n);for(i in r){switch(i){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":r[i]=S[i][r[i]];break;case"ExifVersion":case"FlashpixVersion":r[i]=String.fromCharCode(r[i][0],r[i][1],r[i][2],r[i][3]);break;case"ComponentsConfiguration":r[i]=S.Components[r[i][0]]+S.Components[r[i][1]]+S.Components[r[i][2]]+S.Components[r[i][3]]}a[i]=r[i]}}if(a.GPSInfoIFDPointer){o=c(t,s,s+a.GPSInfoIFDPointer,w,n);for(i in o){switch(i){case"GPSVersionID":o[i]=o[i][0]+"."+o[i][1]+"."+o[i][2]+"."+o[i][3]}a[i]=o[i]}}return a}var g=!1,m=this,p=function t(e){return e instanceof t?e:this instanceof t?void(this.EXIFwrapped=e):new t(e)};void 0!==n?(void 0!==e&&e.exports&&(n=e.exports=p),n.EXIF=p):m.EXIF=p;var v=p.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},y=p.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},w=p.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},S=p.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},C={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};p.getData=function(e,n){return!((e instanceof Image||e instanceof HTMLImageElement)&&!e.complete)&&(t(e)?n&&n.call(e):o(e,n),!0)},p.getTag=function(e,n){if(t(e))return e.exifdata[n]},p.getIptcTag=function(e,n){if(t(e))return e.iptcdata[n]},p.getAllTags=function(e){if(!t(e))return{};var n,a=e.exifdata,i={};for(n in a)a.hasOwnProperty(n)&&(i[n]=a[n]);return i},p.getAllIptcTags=function(e){if(!t(e))return{};var n,a=e.iptcdata,i={};for(n in a)a.hasOwnProperty(n)&&(i[n]=a[n]);return i},p.pretty=function(e){if(!t(e))return"";var n,i=e.exifdata,r="";for(n in i)i.hasOwnProperty(n)&&("object"==a(i[n])?i[n]instanceof Number?r+=n+" : "+i[n]+" ["+i[n].numerator+"/"+i[n].denominator+"]\r\n":r+=n+" : ["+i[n].length+" values]\r\n":r+=n+" : "+i[n]+"\r\n");return r},p.readFromBinaryFile=function(t){return s(t)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return p})}).call(void 0)},{}],10:[function(t,e,n){"use strict";function a(t,e){var n;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=t,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!a.notNeeded(t)){for(var i=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],o=this,s=0,u=i.length;s<u;s++)o[i[s]]=function(t,e){return function(){return t.apply(e,arguments)}}(o[i[s]],o);r&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,a){var i=Node.prototype.removeEventListener;"click"===e?i.call(t,e,n.hijacked||n,a):i.call(t,e,n,a)},t.addEventListener=function(e,n,a){var i=Node.prototype.addEventListener;"click"===e?i.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),a):i.call(t,e,n,a)}),"function"==typeof t.onclick&&(n=t.onclick,t.addEventListener("click",function(t){n(t)},!1),t.onclick=null)}}Object.defineProperty(n,"__esModule",{value:!0});var i=navigator.userAgent.indexOf("Windows Phone")>=0,r=navigator.userAgent.indexOf("Android")>0&&!i,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!i,s=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),u=o&&/OS [6-7]_\d/.test(navigator.userAgent),l=navigator.userAgent.indexOf("BB10")>0;a.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(o&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},a.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!r;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},a.prototype.sendClick=function(t,e){var n,a;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),a=e.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},a.prototype.determineEventType=function(t){return r&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},a.prototype.updateScrollParent=function(t){var e,n;if(!(e=t.fastClickScrollParent)||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},a.prototype.onTouchStart=function(t){var e,n,a;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],o){if((a=window.getSelection()).rangeCount&&!a.isCollapsed)return!0;if(!s){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},a.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},a.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},a.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(t){var e,n,a,i,l,c=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,u&&(l=t.changedTouches[0],(c=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||c).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(a=c.tagName.toLowerCase())){if(e=this.findControl(c)){if(this.focus(c),r)return!1;c=e}}else if(this.needsFocus(c))return t.timeStamp-n>100||o&&window.top!==window&&"input"===a?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,t),o&&"select"===a||(this.targetElement=null,t.preventDefault()),!1);return!(!o||s||!(i=c.fastClickScrollParent)||i.fastClickLastScrollTop===i.scrollTop)||(this.needsClick(c)||(t.preventDefault(),this.sendClick(c,t)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},a.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||((e=this.onMouse(t))||(this.targetElement=null),e)},a.prototype.destroy=function(){var t=this.layer;r&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(t){var e,n,a;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!r)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(l&&(a=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&a[2]>=3&&(e=document.querySelector("meta[name=viewport]"))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(e=document.querySelector("meta[name=viewport]"))&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===t.style.touchAction||"manipulation"===t.style.touchAction)},a.attach=function(t,e){return new a(t,e)},n.default=a},{}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={};a.utils={initSampleCanvas:function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=0,t.height=0,this.getSampleCanvas=function(){return t},this.getSampleContext=function(){return e},this.createImageData=e.createImageData?function(t,n){return e.createImageData(t,n)}:function(t,e){return new ImageData(t,e)}},getSampleCanvas:function(){return this.initSampleCanvas(),this.getSampleCanvas()},getSampleContext:function(){return this.initSampleCanvas(),this.getSampleContext()},createImageData:function(t,e){return this.initSampleCanvas(),this.createImageData(t,e)},clamp:function(t){return t>255?255:t<0?0:t},buildMap:function(t){for(var e,n=[],a=0;a<256;a+=1)n[a]=(e=t(a))>255?255:e<0?0:0|e;return n},applyMap:function(t,e,n){for(var a=0,i=t.length;a<i;a+=4)e[a]=n[t[a]],e[a+1]=n[t[a+1]],e[a+2]=n[t[a+2]],e[a+3]=t[a+3]},mapRGB:function(t,e,n){this.applyMap(t,e,this.buildMap(n))},getPixelIndex:function(t,e,n,a,i){if(t<0||t>=n||e<0||e>=a)switch(i){case 1:t=t<0?0:t>=n?n-1:t,e=e<0?0:e>=a?a-1:e;break;case 2:t=(t%=n)<0?t+n:t,e=(e%=a)<0?e+a:e;break;default:return null}return e*n+t<<2},getPixel:function(t,e,n,a,i,r){if(e<0||e>=a||n<0||n>=i)switch(r){case 1:e=e<0?0:e>=a?a-1:e,n=n<0?0:n>=i?i-1:n;break;case 2:e=(e%=a)<0?e+a:e,n=(n%=i)<0?n+i:n;break;default:return 0}var o=n*a+e<<2;return t[o+3]<<24|t[o]<<16|t[o+1]<<8|t[o+2]},getPixelByIndex:function(t,e){return t[e+3]<<24|t[e]<<16|t[e+1]<<8|t[e+2]},copyBilinear:function(t,e,n,a,i,r,o,s){var u,l,c,d,h,f,g,m=e<0?e-1|0:0|e,p=n<0?n-1|0:0|n,v=e-m,y=n-p,w=0,S=0,C=0,x=0;if(m>=0&&m<a-1&&p>=0&&p<i-1){if(u=p*a+m<<2,!v&&!y)return r[o]=t[u],r[o+1]=t[u+1],r[o+2]=t[u+2],void(r[o+3]=t[u+3]);w=t[u+3]<<24|t[u]<<16|t[u+1]<<8|t[u+2],S=t[(u+=4)+3]<<24|t[u]<<16|t[u+1]<<8|t[u+2],C=t[(u=u-8+(a<<2))+3]<<24|t[u]<<16|t[u+1]<<8|t[u+2],x=t[(u+=4)+3]<<24|t[u]<<16|t[u+1]<<8|t[u+2]}else{if(w=this.getPixel(t,m,p,a,i,s),!v&&!y)return r[o]=w>>16&255,r[o+1]=w>>8&255,r[o+2]=255&w,void(r[o+3]=w>>24&255);S=this.getPixel(t,m+1,p,a,i,s),C=this.getPixel(t,m,p+1,a,i,s),x=this.getPixel(t,m+1,p+1,a,i,s)}d=((w>>16&255)*(l=1-v)+(S>>16&255)*v)*(c=1-y)+((C>>16&255)*l+(x>>16&255)*v)*y,h=((w>>8&255)*l+(S>>8&255)*v)*c+((C>>8&255)*l+(x>>8&255)*v)*y,f=((255&w)*l+(255&S)*v)*c+((255&C)*l+(255&x)*v)*y,g=((w>>24&255)*l+(S>>24&255)*v)*c+((C>>24&255)*l+(x>>24&255)*v)*y,r[o]=d>255?255:d<0?0:0|d,r[o+1]=h>255?255:h<0?0:0|h,r[o+2]=f>255?255:f<0?0:0|f,r[o+3]=g>255?255:g<0?0:0|g},rgbToHsl:function(t,e,n){n/=255;var a=(t/=255)>(e/=255)?t>n?t:n:e>n?e:n,i=t<e?t<n?t:n:e<n?e:n,r=a-i,o=0,s=0,u=(i+a)/2;return 0!==r&&(o=t===a?(e-n)/r+(e<n?6:0):e===a?(n-t)/r+2:(t-e)/r+4,o/=6,s=u>.5?r/(2-a-i):r/(a+i)),[o,s,u]},hslToRgb:function(t,e,n){var a,i,r,o,s,u=[];if(0===e)u=[o=s=255*n+.5|0,o,s];else{a=2*n-(i=n<=.5?n*(e+1):n+e-n*e),r=t+1/3;for(var l,c=0;c<3;c+=1)r<0?r+=1:r>1&&(r-=1),l=6*r<1?a+(i-a)*r*6:2*r<1?i:3*r<2?a+(i-a)*(2/3-r)*6:a,u[c]=255*l+.5|0,r-=1/3}return u}},a.Translate=function(t,e,n,a){},a.Scale=function(t,e,n,a){},a.Rotate=function(t,e,n,a,i,r){},a.Affine=function(t,e,n,a){},a.UnsharpMask=function(t,e){},a.ConvolutionFilter=function(t,e,n,a,i,r,o,s,u,l){var c=t.data,d=t.width,h=t.height,f=(c.length,this.utils.createImageData(d,h)),g=f.data;i=i||1,r=r||0,!1!==o&&(o=!0),!1!==s&&(s=!0);for(var m=0,p=e>>1,v=n>>1,y=(u=u||0)>>16&255,w=u>>8&255,S=255&u,C=255*(l=l||0),x=0;x<h;x+=1)for(var b=0;b<d;b+=1,m+=4){for(var P,D=0,E=0,I=0,k=0,M=!1,T=0,L=-p;L<=p;L+=1){var F,B=x+L;0<=B&&B<h?F=B*d:s?F=x*d:M=!0;for(var R=-v;R<=v;R+=1){var G=a[T++];if(0!==G){var U=b+R;if(0<=U&&U<d||(s?U=b:M=!0),M)D+=G*y,E+=G*w,I+=G*S,k+=G*C;else{var W=F+U<<2;D+=G*c[W],E+=G*c[W+1],I+=G*c[W+2],k+=G*c[W+3]}}}}g[m]=(P=D/i+r)>255?255:P<0?0:0|P,g[m+1]=(P=E/i+r)>255?255:P<0?0:0|P,g[m+2]=(P=I/i+r)>255?255:P<0?0:0|P,g[m+3]=o?c[m+3]:(P=k/i+r)>255?255:P<0?0:0|P}return f},a.Binarize=function(t,e){var n=t.data,a=t.width,i=t.height,r=n.length,o=this.utils.createImageData(a,i),s=o.data;isNaN(e)&&(e=.5),e*=255;for(var u=0;u<r;u+=4){var l=n[u]+n[u+1]+n[u+2]/3;s[u]=s[u+1]=s[u+2]=l<=e?0:255,s[u+3]=255}return o},a.BlendAdd=function(t,e,n,a){for(var i,r=t.data,o=t.width,s=t.height,u=r.length,l=this.utils.createImageData(o,s),c=l.data,d=e.data,h=0;h<u;h+=4)c[h]=(i=r[h]+d[h])>255?255:i,c[h+1]=(i=r[h+1]+d[h+1])>255?255:i,c[h+2]=(i=r[h+2]+d[h+2])>255?255:i,c[h+3]=255;return l},a.BlendSubtract=function(t,e,n,a){for(var i,r=t.data,o=t.width,s=t.height,u=r.length,l=this.utils.createImageData(o,s),c=l.data,d=e.data,h=0;h<u;h+=4)c[h]=(i=r[h]-d[h])<0?0:i,c[h+1]=(i=r[h+1]-d[h+1])<0?0:i,c[h+2]=(i=r[h+2]-d[h+2])<0?0:i,c[h+3]=255;return l},a.BoxBlur=function(){var t=function(t,e,n,a,i){var r,o,s,u,l,c,d,h,f,g,m,p,v,y,w=2*i+1,S=i+1,C=n-1,x=0,b=[];for(f=0,g=256*w;f<g;f+=1)b[f]=f/w|0;for(p=0;p<a;p+=1){for(r=o=s=u=0,l=p,r+=S*t[c=x<<2],o+=S*t[c+1],s+=S*t[c+2],u+=S*t[c+3],f=1;f<=i;f+=1)r+=t[c=x+(f<n?f:C)<<2],o+=t[c+1],s+=t[c+2],u+=t[c+3];for(m=0;m<n;m+=1)e[c=l<<2]=b[r],e[c+1]=b[o],e[c+2]=b[s],e[c+3]=b[u],(v=m+S)>C&&(v=C),(y=m-i)<0&&(y=0),h=x+y<<2,r+=t[d=x+v<<2]-t[h],o+=t[d+1]-t[h+1],s+=t[d+2]-t[h+2],u+=t[d+3]-t[h+3],l+=a;x+=n}};return function(e,n,a,i){for(var r=e.data,o=e.width,s=e.height,u=(r.length,this.utils.createImageData(o,s)),l=u.data,c=this.utils.createImageData(o,s).data,d=0;d<i;d+=1)t(d?l:r,c,o,s,n),t(c,l,s,o,a);return u}}(),a.GaussianBlur=function(t,e){var n,a,i;switch(e){case 2:n=5,a=[1,1,2,1,1,1,2,4,2,1,2,4,8,4,2,1,2,4,2,1,1,1,2,1,1],i=52;break;case 3:n=7,a=[1,1,2,2,2,1,1,1,2,2,4,2,2,1,2,2,4,8,4,2,2,2,4,8,16,8,4,2,2,2,4,8,4,2,2,1,2,2,4,2,2,1,1,1,2,2,2,1,1],i=140;break;case 4:n=15,a=[2,2,3,4,5,5,6,6,6,5,5,4,3,2,2,2,3,4,5,7,7,8,8,8,7,7,5,4,3,2,3,4,6,7,9,10,10,11,10,10,9,7,6,4,3,4,5,7,9,10,12,13,13,13,12,10,9,7,5,4,5,7,9,11,13,14,15,16,15,14,13,11,9,7,5,5,7,10,12,14,16,17,18,17,16,14,12,10,7,5,6,8,10,13,15,17,19,19,19,17,15,13,10,8,6,6,8,11,13,16,18,19,20,19,18,16,13,11,8,6,6,8,10,13,15,17,19,19,19,17,15,13,10,8,6,5,7,10,12,14,16,17,18,17,16,14,12,10,7,5,5,7,9,11,13,14,15,16,15,14,13,11,9,7,5,4,5,7,9,10,12,13,13,13,12,10,9,7,5,4,3,4,6,7,9,10,10,11,10,10,9,7,6,4,3,2,3,4,5,7,7,8,8,8,7,7,5,4,3,2,2,2,3,4,5,5,6,6,6,5,5,4,3,2,2],i=2044;break;default:n=3,a=[1,2,1,2,4,2,1,2,1],i=16}return this.ConvolutionFilter(t,n,n,a,i,0,!1)},a.StackBlur=function(){function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var e=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return function(a,i){var r,o,s,u,l,c,d,h,f,g,m,p,v,y,w,S,C,x,b,P,D,E,I,k,M,T,L,F=a.data,B=a.width,R=a.height,G=(F.length,this.Clone(a)),U=G.data,W=i+i+1,A=B-1,N=R-1,_=i+1,O=_*(_+1)/2,H=new t,q=H,X=e[i],V=n[i];for(s=1;s<W;s+=1)q=q.next=new t,s==_&&(L=q);for(q.next=H,d=c=0,o=0;o<R;o+=1){for(S=C=x=b=h=f=g=m=0,p=_*(P=U[c]),v=_*(D=U[c+1]),y=_*(E=U[c+2]),w=_*(I=U[c+3]),h+=O*P,f+=O*D,g+=O*E,m+=O*I,q=H,s=0;s<_;s+=1)q.r=P,q.g=D,q.b=E,q.a=I,q=q.next;for(s=1;s<_;s+=1)u=c+((A<s?A:s)<<2),h+=(q.r=P=U[u])*(k=_-s),f+=(q.g=D=U[u+1])*k,g+=(q.b=E=U[u+2])*k,m+=(q.a=I=U[u+3])*k,S+=P,C+=D,x+=E,b+=I,q=q.next;for(M=H,T=L,r=0;r<B;r+=1)U[c]=h*X>>V,U[c+1]=f*X>>V,U[c+2]=g*X>>V,U[c+3]=m*X>>V,h-=p,f-=v,g-=y,m-=w,p-=M.r,v-=M.g,y-=M.b,w-=M.a,u=d+((u=r+i+1)<A?u:A)<<2,h+=S+=M.r=U[u],f+=C+=M.g=U[u+1],g+=x+=M.b=U[u+2],m+=b+=M.a=U[u+3],M=M.next,p+=P=T.r,v+=D=T.g,y+=E=T.b,w+=I=T.a,S-=P,C-=D,x-=E,b-=I,T=T.next,c+=4;d+=B}for(r=0;r<B;r+=1){for(C=x=b=S=f=g=m=h=0,p=_*(P=U[c=r<<2]),v=_*(D=U[c+1]),y=_*(E=U[c+2]),w=_*(I=U[c+3]),h+=O*P,f+=O*D,g+=O*E,m+=O*I,q=H,s=0;s<_;s+=1)q.r=P,q.g=D,q.b=E,q.a=I,q=q.next;for(l=B,s=1;s<=i;s+=1)c=l+r<<2,h+=(q.r=P=U[c])*(k=_-s),f+=(q.g=D=U[c+1])*k,g+=(q.b=E=U[c+2])*k,m+=(q.a=I=U[c+3])*k,S+=P,C+=D,x+=E,b+=I,q=q.next,s<N&&(l+=B);for(c=r,M=H,T=L,o=0;o<R;o+=1)U[u=c<<2]=h*X>>V,U[u+1]=f*X>>V,U[u+2]=g*X>>V,U[u+3]=m*X>>V,h-=p,f-=v,g-=y,m-=w,p-=M.r,v-=M.g,y-=M.b,w-=M.a,u=r+((u=o+_)<N?u:N)*B<<2,h+=S+=M.r=U[u],f+=C+=M.g=U[u+1],g+=x+=M.b=U[u+2],m+=b+=M.a=U[u+3],M=M.next,p+=P=T.r,v+=D=T.g,y+=E=T.b,w+=I=T.a,S-=P,C-=D,x-=E,b-=I,T=T.next,c+=B}return G}}(),a.Brightness=function(t,e){var n=t.data,a=t.width,i=t.height,r=(n.length,this.utils.createImageData(a,i)),o=r.data;return this.utils.mapRGB(n,o,function(t){return(t+=e)>255?255:t}),r},a.BrightnessContrastGimp=function(t,e,n){var a=t.data,i=t.width,r=t.height,o=a.length,s=this.utils.createImageData(i,r),u=s.data,l=Math.PI/4;e/=100,n*=.99,n/=100,n=Math.tan((n+1)*l);for(var c=0,d=0;d<o;d+=4)c+=19595*a[d]+38470*a[d+1]+7471*a[d+2]>>16;return c/=o/4,this.utils.mapRGB(a,u,function(t){return e<0?t*=1+e:e>0&&(t+=(255-t)*e),0!==n&&(t=(t-c)*n+c),t+.5|0}),s},a.BrightnessContrastPhotoshop=function(t,e,n){var a=t.data,i=t.width,r=t.height,o=(a.length,this.utils.createImageData(i,r)),s=o.data;return e=(e+100)/100,n=(n+100)/100,this.utils.mapRGB(a,s,function(t){return t*=e,(t=(t-127.5)*n+127.5)+.5|0}),o},a.Channels=function(t,e){var n;switch(e){case 2:n=[0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,1,0];break;case 3:n=[0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,1,0];break;default:n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,1,0]}return this.ColorMatrixFilter(t,n)},a.Clone=function(t){return this.Copy(t,this.utils.createImageData(t.width,t.height))},a.CloneBuiltin=function(t){var e,n=t.width,a=t.height,i=this.utils.getSampleCanvas(),r=this.utils.getSampleContext();return i.width=n,i.height=a,r.putImageData(t,0,0),e=r.getImageData(0,0,n,a),i.width=0,i.height=0,e},a.ColorMatrixFilter=function(t,e){var n,a,i,r,o,s,u=t.data,l=t.width,c=t.height,d=u.length,h=this.utils.createImageData(l,c),f=h.data,g=e[0],m=e[1],p=e[2],v=e[3],y=e[4],w=e[5],S=e[6],C=e[7],x=e[8],b=e[9],P=e[10],D=e[11],E=e[12],I=e[13],k=e[14],M=e[15],T=e[16],L=e[17],F=e[18],B=e[19];for(a=0;a<d;a+=4)i=u[a],r=u[a+1],o=u[a+2],s=u[a+3],f[a]=(n=i*g+r*m+o*p+s*v+y)>255?255:n<0?0:0|n,f[a+1]=(n=i*w+r*S+o*C+s*x+b)>255?255:n<0?0:0|n,f[a+2]=(n=i*P+r*D+o*E+s*I+k)>255?255:n<0?0:0|n,f[a+3]=(n=i*M+r*T+o*L+s*F+B)>255?255:n<0?0:0|n;return h},a.ColorTransformFilter=function(t,e,n,a,i,r,o,s,u){var l,c,d=t.data,h=t.width,f=t.height,g=d.length,m=this.utils.createImageData(h,f),p=m.data;for(l=0;l<g;l+=4)p[l]=(c=d[l]*e+r)>255?255:c<0?0:c,p[l+1]=(c=d[l+1]*n+o)>255?255:c<0?0:c,p[l+2]=(c=d[l+2]*a+s)>255?255:c<0?0:c,p[l+3]=(c=d[l+3]*i+u)>255?255:c<0?0:c;return m},a.Copy=function(t,e){for(var n=t.data,a=n.length,i=e.data;a--;)i[a]=n[a];return e},a.Crop=function(t,e,n,a,i){var r,o,s,u,l=t.data,c=t.width,d=t.height,h=(l.length,this.utils.createImageData(a,i)),f=h.data,g=Math.max(e,0),m=Math.max(n,0),p=Math.min(e+a,c),v=Math.min(n+i,d),y=g-e,w=m-n;for(r=m,dstRow=w;r<v;r+=1,dstRow+=1)for(o=g,dstCol=y;o<p;o+=1,dstCol+=1)s=r*c+o<<2,f[u=dstRow*a+dstCol<<2]=l[s],f[u+1]=l[s+1],f[u+2]=l[s+2],f[u+3]=l[s+3];return h},a.CropBuiltin=function(t,e,n,a,i){var r=t.width,o=t.height,s=this.utils.getSampleCanvas(),u=this.utils.getSampleContext();s.width=r,s.height=o,u.putImageData(t,0,0);var l=u.getImageData(e,n,a,i);return s.width=0,s.height=0,l},a.Desaturate=function(t){for(var e=t.data,n=t.width,a=t.height,i=e.length,r=this.utils.createImageData(n,a),o=r.data,s=0;s<i;s+=4){var u=e[s],l=e[s+1],c=e[s+2],d=((u>l?u>c?u:c:l>c?l:c)+(u<l?u<c?u:c:l<c?l:c))/2+.5|0;o[s]=o[s+1]=o[s+2]=d,o[s+3]=e[s+3]}return r},a.DisplacementMapFilter=function(t,e,n,i,r,o,s,u,l){var c=t.data,d=t.width,h=t.height,f=(c.length,a.Clone(t)),g=f.data;n||(n=0),i||(i=0),r||(r=0),o||(o=0),s||(s=0),u||(u=0),l||(l=2);var m,p,v,y,w,S,C,x=e.width,b=e.height,P=e.data,D=x+n,E=b+i;for(S=0;S<d;S+=1)for(C=0;C<h;C+=1)m=C*d+S<<2,S<n||C<i||S>=D||C>=E?p=m:(y=S+((P[(v=(C-i)*x+(S-n)<<2)+r]-128)*s>>8),w=C+((P[v+o]-128)*u>>8),null===(p=a.utils.getPixelIndex(y+.5|0,w+.5|0,d,h,l))&&(p=m)),g[m]=c[p],g[m+1]=c[p+1],g[m+2]=c[p+2],g[m+3]=c[p+3];return f},a.Dither=function(t,e){var n,a,i=t.width,r=t.height,o=this.Clone(t),s=o.data,u=[],l=(e=e<2?2:e>255?255:e)-1,c=0,d=0;for(a=0;a<e;a+=1)u[a]=255*a/l;n=this.utils.buildMap(function(t){var n=u[c];return(d+=e)>255&&(d-=255,c+=1),n});var h,f,g,m,p,v,y,w,S,C,x,b,P,D,E,I=i-1,k=r-1,M=7/16,T=3/16,L=5/16,F=1/16;for(f=0;f<r;f+=1)for(h=0;h<i;h+=1)m=s[g=f*i+h<<2],p=s[g+1],v=s[g+2],y=n[m],w=n[p],S=n[v],s[g]=y,s[g+1]=w,s[g+2]=S,C=m-y,x=p-w,b=v-S,g+=4,h<I&&(P=s[g]+M*C,D=s[g+1]+M*x,E=s[g+2]+M*b,s[g]=P>255?255:P<0?0:0|P,s[g+1]=D>255?255:D<0?0:0|D,s[g+2]=E>255?255:E<0?0:0|E),g+=i-2<<2,h>0&&f<k&&(P=s[g]+T*C,D=s[g+1]+T*x,E=s[g+2]+T*b,s[g]=P>255?255:P<0?0:0|P,s[g+1]=D>255?255:D<0?0:0|D,s[g+2]=E>255?255:E<0?0:0|E),g+=4,f<k&&(P=s[g]+L*C,D=s[g+1]+L*x,E=s[g+2]+L*b,s[g]=P>255?255:P<0?0:0|P,s[g+1]=D>255?255:D<0?0:0|D,s[g+2]=E>255?255:E<0?0:0|E),g+=4,h<I&&f<k&&(P=s[g]+F*C,D=s[g+1]+F*x,E=s[g+2]+F*b,s[g]=P>255?255:P<0?0:0|P,s[g+1]=D>255?255:D<0?0:0|D,s[g+2]=E>255?255:E<0?0:0|E);return o},a.Edge=function(t){return this.ConvolutionFilter(t,3,3,[-1,-1,-1,-1,8,-1,-1,-1,-1])},a.Emboss=function(t){return this.ConvolutionFilter(t,3,3,[-2,-1,0,-1,1,1,0,1,2])},a.Enrich=function(t){return this.ConvolutionFilter(t,3,3,[0,-2,0,-2,20,-2,0,-2,0],10,-40)},a.Flip=function(t,e){var n,a,i,r,o=t.data,s=t.width,u=t.height,l=(o.length,this.utils.createImageData(s,u)),c=l.data;for(a=0;a<u;a+=1)for(n=0;n<s;n+=1)i=a*s+n<<2,c[r=e?(u-a-1)*s+n<<2:a*s+(s-n-1)<<2]=o[i],c[r+1]=o[i+1],c[r+2]=o[i+2],c[r+3]=o[i+3];return l},a.Gamma=function(t,e){var n=t.data,a=t.width,i=t.height,r=(n.length,this.utils.createImageData(a,i)),o=r.data;return this.utils.mapRGB(n,o,function(t){return(t=255*Math.pow(t/255,1/e)+.5)>255?255:t+.5|0}),r},a.GrayScale=function(t){for(var e=t.data,n=t.width,a=t.height,i=e.length,r=this.utils.createImageData(n,a),o=r.data,s=0;s<i;s+=4){var u=19595*e[s]+38470*e[s+1]+7471*e[s+2]>>16;o[s]=o[s+1]=o[s+2]=u,o[s+3]=e[s+3]}return r},a.HSLAdjustment=function(t,e,n,a){var i=t.data,r=t.width,o=t.height,s=i.length,u=this.utils.createImageData(r,o),l=u.data;e/=360,n/=100,a/=100;var c,d,h,f,g,m,p=this.utils.rgbToHsl,v=this.utils.hslToRgb;for(m=0;m<s;m+=4){for(c=(f=p(i[m],i[m+1],i[m+2]))[0]+e;c<0;)c+=1;for(;c>1;)c-=1;(d=f[1]+f[1]*n)<0?d=0:d>1&&(d=1),h=f[2],a>0?h+=(1-h)*a:a<0&&(h+=h*a),g=v(c,d,h),l[m]=g[0],l[m+1]=g[1],l[m+2]=g[2],l[m+3]=i[m+3]}return u},a.Invert=function(t){var e=t.data,n=t.width,a=t.height,i=(e.length,this.utils.createImageData(n,a)),r=i.data;return this.utils.mapRGB(e,r,function(t){return 255-t}),i},a.Mosaic=function(t,e){var n,a,i,r,o,s,u,l,c,d,h,f,g,m,p,v=t.data,y=t.width,w=t.height,S=(v.length,this.utils.createImageData(y,w)),C=S.data,x=Math.ceil(y/e),b=Math.ceil(w/e);for(n=0;n<b;n+=1)for((s=(o=n*e)+e)>w&&(s=w),a=0;a<x;a+=1){for((r=(i=a*e)+e)>y&&(r=y),f=g=m=p=0,h=(r-i)*(s-o),l=o;l<s;l+=1)for(c=l*y,u=i;u<r;u+=1)f+=v[d=c+u<<2],g+=v[d+1],m+=v[d+2],p+=v[d+3];for(f=f/h+.5|0,g=g/h+.5|0,m=m/h+.5|0,p=p/h+.5|0,l=o;l<s;l+=1)for(c=l*y,u=i;u<r;u+=1)C[d=c+u<<2]=f,C[d+1]=g,C[d+2]=m,C[d+3]=p}return S},a.Oil=function(t,e,n){var a,i,r,o,s,u,l,c,d,h,f,g,m,p,v,y,w,S,C=t.data,x=t.width,b=t.height,P=(C.length,this.utils.createImageData(x,b)),D=P.data,E=0,I=[],k=[],M=[],T=[],L=[],F=[];for(i=0;i<b;i+=1)for(a=0;a<x;a+=1){for(r=0;r<n;r+=1)I[r]=k[r]=M[r]=T[r]=L[r]=F[r]=0;for(o=-e;o<=e;o+=1)if(!((u=i+o)<0||u>=b))for(c=u*x,s=-e;s<=e;s+=1)(l=a+s)<0||l>=x||(h=C[d=c+l<<2],p=(f=C[d+1])*n>>8,v=(g=C[d+2])*n>>8,T[m=h*n>>8]+=h,L[p]+=f,F[v]+=g,I[m]+=1,k[p]+=1,M[v]+=1);for(y=w=S=0,r=1;r<n;r+=1)I[r]>I[y]&&(y=r),k[r]>k[w]&&(w=r),M[r]>M[S]&&(S=r);D[E]=T[y]/I[y]|0,D[E+1]=L[w]/k[w]|0,D[E+2]=F[S]/M[S]|0,D[E+3]=C[E+3],E+=4}return P},a.OpacityFilter=function(t,e){for(var n=t.data,a=t.width,i=t.height,r=n.length,o=this.utils.createImageData(a,i),s=o.data,u=0;u<r;u+=4)s[u]=n[u],s[u+1]=n[u+1],s[u+2]=n[u+2],s[u+3]=e;return o},a.Posterize=function(t,e){var n,a=t.data,i=t.width,r=t.height,o=(a.length,this.utils.createImageData(i,r)),s=o.data,u=[],l=(e=e<2?2:e>255?255:e)-1,c=0,d=0;for(n=0;n<e;n+=1)u[n]=255*n/l;return this.utils.mapRGB(a,s,function(t){var n=u[c];return(d+=e)>255&&(d-=255,c+=1),n}),o},a.Rescale=function(t,e){var n=t.data,a=t.width,i=t.height,r=(n.length,this.utils.createImageData(a,i)),o=r.data;return this.utils.mapRGB(n,o,function(t){return(t*=e)>255?255:t+.5|0}),r},a.ResizeNearestNeighbor=function(t,e,n){var a,i,r,o,s=t.data,u=t.width,l=t.height,c=(s.length,this.utils.createImageData(e,n)),d=c.data,h=u/e,f=l/n,g=0;for(r=0;r<n;r+=1)for(o=(r*f|0)*u,i=0;i<e;i+=1)a=o+i*h<<2,d[g]=s[a],d[g+1]=s[a+1],d[g+2]=s[a+2],d[g+3]=s[a+3],g+=4;return c},a.Resize=function(t,e,n){var a,i,r=t.data,o=t.width,s=t.height,u=(r.length,this.utils.createImageData(e,n)),l=u.data,c=o/e,d=s/n,h=0;for(i=0;i<n;i+=1)for(a=0;a<e;a+=1)this.utils.copyBilinear(r,a*c,i*d,o,s,l,h,0),h+=4;return u},a.ResizeBuiltin=function(t,e,n){var a,i=t.width,r=t.height,o=this.utils.getSampleCanvas(),s=this.utils.getSampleContext();return o.width=Math.max(i,e),o.height=Math.max(r,n),s.save(),s.putImageData(t,0,0),s.scale(e/i,n/r),s.drawImage(o,0,0),a=s.getImageData(0,0,e,n),s.restore(),o.width=0,o.height=0,a},a.Sepia=function(t){var e,n,a,i,r,o=t.data,s=t.width,u=t.height,l=o.length,c=this.utils.createImageData(s,u),d=c.data;for(i=0;i<l;i+=4)e=o[i],n=o[i+1],a=o[i+2],d[i]=(r=.393*e+.769*n+.189*a)>255?255:r<0?0:r+.5|0,d[i+1]=(r=.349*e+.686*n+.168*a)>255?255:r<0?0:r+.5|0,d[i+2]=(r=.272*e+.534*n+.131*a)>255?255:r<0?0:r+.5|0,d[i+3]=o[i+3];return c},a.Sharpen=function(t,e){return this.ConvolutionFilter(t,3,3,[-e/16,-e/8,-e/16,-e/8,.75*e+1,-e/8,-e/16,-e/8,-e/16])},a.Solarize=function(t){var e=t.data,n=t.width,a=t.height,i=(e.length,this.utils.createImageData(n,a)),r=i.data;return this.utils.mapRGB(e,r,function(t){return t>127?2*(t-127.5):2*(127.5-t)}),i},a.Transpose=function(t){var e,n,a=t.data,i=t.width,r=t.height,o=(a.length,this.utils.createImageData(r,i)),s=o.data;for(y=0;y<r;y+=1)for(x=0;x<i;x+=1)e=y*i+x<<2,s[n=x*r+y<<2]=a[e],s[n+1]=a[e+1],s[n+2]=a[e+2],s[n+3]=a[e+3];return o},a.Twril=function(t,e,n,a,i,r,o){var s=t.data,u=t.width,l=t.height,c=(s.length,this.utils.createImageData(u,l)),d=c.data;e*=u,n*=l,i*=Math.PI/180;var h,f,g,m,p,v,y,w,S,C=a*a,x=0;for(f=0;f<l;f+=1)for(h=0;h<u;h+=1)(p=(g=h-e)*g+(m=f-n)*m)>C?(d[x]=s[x],d[x+1]=s[x+1],d[x+2]=s[x+2],d[x+3]=s[x+3]):(p=Math.sqrt(p),v=Math.atan2(m,g)+i*(a-p)/a,y=e+p*Math.cos(v),w=n+p*Math.sin(v),o?this.utils.copyBilinear(s,y,w,u,l,d,x,r):(S=(w+.5|0)*u+(y+.5|0)<<2,d[x]=s[S],d[x+1]=s[S+1],d[x+2]=s[S+2],d[x+3]=s[S+3])),x+=4;return c},n.default=a},{}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=[{name:"HSLAdjustment",chooseValue:["h","s","l"],range:[{min:-180,max:180,first:0},{min:-100,max:100,first:0},{min:-100,max:100,first:0}]},{name:"GrayScale",chooseValue:[],range:[]},{name:"Gamma",chooseValue:["g"],range:[{min:0,max:3,first:1}]},{name:"BrightnessContrastGimp",chooseValue:["b","c"],range:[{min:-100,max:100,first:30},{min:-100,max:100,first:30}]},{name:"Edge",chooseValue:[],range:[]},{name:"Emboss",chooseValue:[],range:[]},{name:"Invert",chooseValue:[],range:[]},{name:"Oil",chooseValue:["r","l"],range:[{min:1,max:5,first:2},{min:1,max:255,first:50}]},{name:"Solarize",chooseValue:[],range:[]},{name:"Twril",chooseValue:["cx","cy","r","angle","edge","smooth"],range:[{min:.5,max:.5,first:.5},{min:.5,max:.5,first:.5},{min:10,max:200,first:100},{min:-720,max:720,first:100},{min:0,max:0,first:"Clamp"},{min:1,max:1,first:1}]}];n.default={filterValue:a}},{}]},{},[4]);
//# sourceMappingURL=index.js.map
